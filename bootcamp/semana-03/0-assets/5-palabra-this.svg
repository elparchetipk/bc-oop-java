<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #e0e0e0; }
      .subtitle { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #b0b0b0; }
      .text { font-family: Arial, sans-serif; font-size: 14px; fill: #e0e0e0; }
      .small-text { font-family: Arial, sans-serif; font-size: 12px; fill: #9e9e9e; }
      .code { font-family: 'Courier New', monospace; font-size: 12px; fill: #e0e0e0; }
      .bg-dark { fill: #121212; }
      .box-this { fill: #6d28d9; stroke: #a78bfa; stroke-width: 2; }
      .box-sin-this { fill: #7f1d1d; stroke: #ef4444; stroke-width: 2; }
      .box-con-this { fill: #14532d; stroke: #22c55e; stroke-width: 2; }
      .arrow-this { fill: none; stroke: #a78bfa; stroke-width: 2.5; }
    </style>
    <marker id="arrow-purple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#a78bfa"/>
    </marker>
  </defs>

  <!-- Fondo oscuro -->
  <rect width="900" height="700" class="bg-dark"/>

  <!-- Título -->
  <text x="450" y="40" text-anchor="middle" class="title">La Palabra Clave "this"</text>
  <text x="450" y="65" text-anchor="middle" class="small-text">Referencia al objeto actual</text>

  <!-- CONCEPTO PRINCIPAL -->
  <g id="concepto">
    <rect x="100" y="90" width="700" height="90" rx="8" class="box-this"/>
    <text x="450" y="115" text-anchor="middle" class="subtitle" style="fill: #e0e0e0;">¿Qué es "this"?</text>
    <text x="120" y="140" class="text" style="fill: #a78bfa; font-weight: bold;">this</text>
    <text x="160" y="140" class="text">es una referencia al objeto actual (la instancia que está ejecutando el
      código).
    </text>
    <text x="120" y="165" class="small-text">Se usa para:</text>
    <text x="140" y="183" class="small-text">1. Diferenciar atributos de parámetros con el mismo nombre</text>
    <text x="450" y="183" class="small-text">2. Llamar a otro constructor de la misma clase</text>
  </g>

  <!-- USO 1: DIFERENCIAR ATRIBUTOS DE PARÁMETROS -->
  <g id="uso1">
    <text x="450" y="210" text-anchor="middle" class="subtitle">Uso 1: Diferenciar Atributos de Parámetros</text>

    <!-- SIN this - PROBLEMA -->
    <g id="sin-this">
      <rect x="50" y="230" width="380" height="150" rx="8" class="box-sin-this"/>
      <text x="240" y="255" text-anchor="middle" class="subtitle" style="fill: #ef4444;">❌ SIN "this" - Ambigüedad
      </text>

      <text x="70" y="280" class="code">public class Persona {</text>
      <text x="90" y="298" class="code">private String nombre;</text>
      <text x="90" y="318" class="code">public Persona(String nombre) {</text>
      <text x="110" y="336" class="code" style="fill: #ef4444; font-weight: bold;">nombre = nombre;</text>
      <text x="110" y="354" class="small-text" style="fill: #ef4444;">// ¿Cuál es cuál? Ambiguo!</text>
      <text x="90" y="370" class="code">}</text>
    </g>

    <!-- CON this - SOLUCIÓN -->
    <g id="con-this">
      <rect x="470" y="230" width="380" height="150" rx="8" class="box-con-this"/>
      <text x="660" y="255" text-anchor="middle" class="subtitle" style="fill: #22c55e;">✓ CON "this" - Claro</text>

      <text x="490" y="280" class="code">public class Persona {</text>
      <text x="510" y="298" class="code">private String nombre;</text>
      <text x="510" y="318" class="code">public Persona(String nombre) {</text>
      <text x="530" y="336" class="code" style="fill: #22c55e; font-weight: bold;">this.nombre = nombre;</text>
      <text x="530" y="354" class="small-text" style="fill: #22c55e;">// ¡Claro! Atributo = Parámetro</text>
      <text x="510" y="370" class="code">}</text>
    </g>
  </g>

  <!-- DIAGRAMA: this APUNTA AL OBJETO -->
  <g id="diagrama-this">
    <text x="450" y="410" text-anchor="middle" class="subtitle">¿A qué apunta "this"?</text>

    <rect x="150" y="425" width="600" height="110" rx="8" fill="#1e293b" stroke="#a78bfa" stroke-width="2"/>

    <!-- Objeto en memoria -->
    <rect x="500" y="445" width="200" height="70" rx="5" fill="#0f172a" stroke="#a78bfa" stroke-width="2"/>
    <text x="600" y="465" text-anchor="middle" class="small-text" style="fill: #a78bfa; font-weight: bold;">OBJETO EN
      MEMORIA
    </text>
    <text x="520" y="485" class="code">nombre: "Juan"</text>
    <text x="520" y="503" class="code">edad: 25</text>

    <!-- Código con this -->
    <text x="180" y="455" class="code">public Persona(String nombre) {</text>
    <text x="200" y="473" class="code" style="fill: #a78bfa; font-weight: bold;">this.nombre = nombre;</text>
    <text x="200" y="491" class="code" style="fill: #a78bfa; font-weight: bold;">this.edad = 25;</text>
    <text x="180" y="509" class="code">}</text>

    <!-- Flecha: this apunta al objeto -->
    <path d="M 320 473 Q 400 473, 500 473" class="arrow-this" marker-end="url(#arrow-purple)"/>
    <text x="390" y="465" class="small-text" style="fill: #a78bfa; font-weight: bold;">apunta a</text>
  </g>

  <!-- USO 2: LLAMAR A OTRO CONSTRUCTOR -->
  <g id="uso2">
    <text x="450" y="565" text-anchor="middle" class="subtitle">Uso 2: Llamar a Otro Constructor con this()</text>

    <rect x="100" y="580" width="700" height="95" rx="8" fill="#0f172a" stroke="#a78bfa" stroke-width="2"/>

    <text x="120" y="605" class="code">public class Producto {</text>
    <text x="140" y="625" class="code">public Producto() {</text>
    <text x="160" y="643" class="code" style="fill: #a78bfa; font-weight: bold;">this("Sin nombre", 0.0);</text>
    <text x="450" y="643" class="small-text" style="fill: #9e9e9e;">// Llama al constructor con 2 parámetros</text>
    <text x="140" y="658" class="code">}</text>
    <text x="140" y="676" class="code">public Producto(String nombre, double precio) { ... }</text>
  </g>

  <!-- RESUMEN EN RECUADROS -->
  <g id="resumen">
    <rect x="50" y="685" width="380" height="15" fill="#6d28d9"/>
    <text x="240" y="697" text-anchor="middle" class="small-text" fill="white" font-weight="bold">
      this.atributo → accede al atributo del objeto
    </text>

    <rect x="470" y="685" width="380" height="15" fill="#6d28d9"/>
    <text x="660" y="697" text-anchor="middle" class="small-text" fill="white" font-weight="bold">
      this(parametros) → llama a otro constructor
    </text>
  </g>
</svg>
